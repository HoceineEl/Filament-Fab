document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".fab-action").forEach(e=>{e.addEventListener("click",function(t){let n=t.currentTarget.dataset.action;document.dispatchEvent(new CustomEvent("fab:action",{detail:{action:n}}))})}),document.querySelectorAll(".menu-item").forEach((e,t)=>{e.style.setProperty("--animation-order",t)})});window.Alpine&&window.Alpine.data("floatingActionButton",(e={})=>({open:!1,dragging:!1,position:{top:100,left:100},offset:{x:0,y:0},init(){e=e||{};let t=e.defaultPosition||"bottom-right",n=e.rememberPosition!==void 0?e.rememberPosition:!0,i=this.getDefaultPositionCoordinates(t);if(n){let o=JSON.parse(localStorage.getItem("FAB-position"));o?this.position=o:this.position=i}else this.position=i;window.addEventListener("mousemove",o=>this.onDrag(o)),window.addEventListener("mouseup",()=>this.stopDragging()),this.$nextTick(()=>{this.$el&&this.$el.querySelectorAll(".menu-item").forEach((o,s)=>{o.style.setProperty("--animation-order",s)})})},getDefaultPositionCoordinates(t){let i=window.innerWidth,o=window.innerHeight;switch(t){case"bottom-right":return{top:o-100,left:i-100};case"bottom-left":return{top:o-100,left:100};case"top-right":return{top:100,left:i-100};case"top-left":return{top:100,left:100};default:return{top:o-100,left:i-100}}},toggleMenu(){this.open=!this.open,this.open&&this.$nextTick(()=>{this.$el.querySelectorAll(".menu-item").forEach((t,n)=>{t.style.setProperty("--animation-order",n)})})},startDragging(t){t.target.closest(".menu-items")||(this.dragging=!0,this.offset={x:t.clientX-this.position.left,y:t.clientY-this.position.top})},stopDragging(){this.dragging&&(this.dragging=!1,e.rememberPosition!==!1&&localStorage.setItem("FAB-position",JSON.stringify(this.position)))},onDrag(t){if(!this.dragging)return;this.position={top:t.clientY-this.offset.y,left:t.clientX-this.offset.x};let n=this.$refs.container;if(!n)return;let i=n.getBoundingClientRect();this.position.left<0&&(this.position.left=0),this.position.top<0&&(this.position.top=0),this.position.left+i.width>window.innerWidth&&(this.position.left=window.innerWidth-i.width),this.position.top+i.height>window.innerHeight&&(this.position.top=window.innerHeight-i.height)}}));
